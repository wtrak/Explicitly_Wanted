<!DOCTYPE html>
<html>
<head>
  <title>Verify Payment</title>
  <script>
    async function verifyTXID() {
      const txid = document.getElementById("txid").value;
      const resultBox = document.getElementById("result");
      resultBox.textContent = "Verifying...";

      const apiUrl = "https://go.getblock.us/f579c1dc4ff34d559c1aae60bac442d3";
      const response = await fetch(apiUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          jsonrpc: "2.0",
          id: 1,
          method: "eth_getTransactionByHash",
          params: [txid]
        })
      });

      const data = await response.json();
      if (!data.result || data.result.to !== "0x28d1Fec8B4457383fBB18F163AF5e3b6cEDe8a32") {
        resultBox.textContent = "Invalid or unmatched transaction.";
        return;
      }

      const amount = parseInt(data.result.value, 16) / 1e6;
      if (amount === 1) {
        window.location.href = "post.html";
      } else {
        resultBox.textContent = "Transaction is not exactly 1 USDT. Please include fees.";
      }
    }
  </script>
</head>
<body>
  <h1>Submit a Wanted Post</h1>
  <p>Send exactly <strong>1 USDT (TRC20)</strong> to wallet: <code>TGW56spanMC3ywvMh5JPP3Dkd3BzjuemHy</code></p>
  <p>⚠️ Be sure to include enough for fees. If the amount received is less than 1 USDT, your post won't be accepted and the payment is non-refundable.</p>
  <label for="txid">Enter your transaction ID:</label>
  <input type="text" id="txid" placeholder="Paste your TXID here">
  <button onclick="verifyTXID()">Verify and Continue</button>
  <p id="result"></p>
</body>
</html>